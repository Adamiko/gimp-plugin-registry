============================ Separate+ Readme =========================

-Introduction
-Requirements
-What you need
-Installation
-How to use
-Color separation using devicelink profile
-Explanation of Dialogs
-Moving together with Configuration
-Sample scripts
-TIFF Import plug-in
-Tips for building plug-ins
-Authors
-License

----- Introduction
Separate+ is the name of a project and plug-in package aimed mainly for 
complementing color management functionality of GIMP and for assisting 
publication (Web, printing etc.) activities by utilizing open source 
software. This package includes the following 3 plug-ins.

separate
  It is a plug-in for RGB -> CMYK conversion, saving and softproofing 
  and is an improved version of Separate plug-in by Alastair M. Robinson.

icc_colorspace
  It is a plug-in for RGB -> RGB conversion and profile management.
  Another file gives a description of functionalities.

separate_import (bonus)
  It is a plug-in for loading (importing) CMYK TIFF files saved by 
  Separate plug-in. It can also be used for TIFF files created by 
  another application, but the operation is not guaranteed.


----- Requirements
Plug-ins require LittleCMS version 1.15 or later. 
Bundled win32 binaries are built for a Pentium III or its compatible 
CPUs. These are tested with The GIMP for Windows version 2.6.8.

----- What you need
* Basic knowledge about ICC-based color management

* GIMP (Version 2.4 or later)

* Plug-ins included in this package (Windows binary code for GIMP 2.4 or 
  later is attached)

* ICC profiles
  A sRGB profile is included. Standard profiles such as Adobe RGB, SWOP 
  or FOGRA are downloadable from Adobe website.

(Mac)
 http://www.adobe.com/support/downloads/iccprofiles/iccprofiles_mac.html
(Win/Linux)
 http://www.adobe.com/support/downloads/iccprofiles/iccprofiles_win.html


----- Installation
                              (Windows)

Copy (or move) executable files in "bin\win32" folder into the plug-in 
folder of GIMP.

See Preferences dialog to check the location of the plug-in folder (If 
there are multiple folders you have to copy only into one folder).

For ICC profiles announced in "What you need" section, decompress the 
ZIP file downloaded and move the decompressed files whose extension is 
.icc into a predetermined place (following a. or b.).

a. Open a window of any folder, input "%COMMONPROGRAMFILES%\Adobe\Color\
   Profiles\Recommended" and press Enter key. If you can move to this 
   folder, then put the ICC profiles in this folder. If you find files 
   with the same name, you need neither overwriting nor copying.

b. If you cannot find the folder described in a., select and right-click 
   profile icons to display "Install Profile" item in the menu and 
   click it.

                              (Mac OS X)

Use MacPorts to build and install GIMP. Start Terminal, move to the 
folder that was generated by the Separate+ ZIP file decompression, and 
run the following commands.

$ make -f Makefile.macosx
$ sudo make -f Makefile.macosx install

NOTE : If you use it for GIMP.app, copy separate, separate_import and 
icc_colorspace generated by the procedure as above into plug-in folder. 
See Preferences dialog to check the location of the folder.

For ICC profiles announced in "What you need" section, decompress the 
ZIP file downloaded and move the decompressed files whose extension is 
.icc into a predetermined place.

In the case of Mac OS X, the folder is one of the following.

a. /Library/Application Support/Adobe/Color/Profiles/Recommended

b. /Library/ColorSync/Profiles

c. (Home Folder)/Library/ColorSync/Profiles

                    (Linux or UNIX-like operating systems)

In the beginning, check whether a GIMP development package is installed. 
(In the case of Ubuntu, the name is "libgimp2.0-dev".)
Additionally, Little CMS (lcms), libtiff and libjpeg development 
packages are required to be installed; therefore, check it at the same 
time.

Next, modify Makefile by an editor as necessary. Regularly, PREFIX, 
INSTALLDIR etc. will be modified to fit your environment.

Open the terminal window, move to the folder which is generated by the 
separate+ ZIP file decompression, and run the following commands.

$ make
$ sudo make install

NOTE : If you cannot use sudo, get superuser privilige by "su" and "make 
install".

For ICC profiles announced in "What you need" section, decompress the 
ZIP file downloaded and move the decompressed files whose extension is 
.icc into a predetermined place. In the case of Linux, the folder is one 
of the following.

a. /usr/share/color/icc

b. ~/.color/icc


----- How to use
First, activate a layer you would like to separate. It may unlikely to 
separate only a specific layer, so you will integrate images regularly.

Next, select "Image -> Separate -> Separate" from the menu in the image 
window.

For "Source color space", specify an image profile (if the image has 
embedded profile, you have only to select "Give priority to embedded 
profile") , and for "Destination color space", specify a CMYK output 
profile. If you have any question, contact your printing company.

For rendering intent, select "Perceptual" or "Relative colorimetric" 
(decide from the result which is better). Then, we recommend turning on 
"Use BPC algorithm".

For "Make CMYK pseudo-composite", select if you are planning to tweak 
after separation.

After above-mentioned specification and clicking OK, a new image with 4 
layers (and sometimes a Background layer) is generated.

Each layer corresponds to an individual CMYK color; you can alter it or 
adjust the tone curve or level if required. Nevertheless, do not change 
the layer names. In addition, I do not recommend adding or deleting 
layers or layer masks. If you would like to keep the repairs, save as 
XCF format (Saving as PSD format eliminates the information about the 
profile used for the separation).

To check the separated color through display screen, Select Image -> 
Separate -> Proof from "Windows of separated image" menu.

For "Monitor color space", specify the profile of your monitor. 
If you need to check the profile, select "View -> Display Filters..." 
from "Image Window" menu, and after the dialog opens, click "Color 
Management" filter. Then, the name of the monitor profile is displayed 
on the lower half of the dialog (You cannot check colors if the 
configuration is "None").

For "Separated image's color space", choose the profile you specified 
as destination color space at the separation. Usually, the profile 
information used for the separation is recorded in the resulting image; 
therefore, you may select "Give priority to attatched profile".

For "Mode", it is difficult to say which is optimum, but Photoshop 
displays the same as "Normal"; therefore, if you are accustomed to 
Photoshop's display, select "Normal".

After the specification mentioned above, click OK and an image for check 
is generated. Note that you cannot check in appropriate color if "Color 
Management -> Mode of operation" in Preferences is "Print simulation". 
When your check is finished, you can close the window.

Finally, export the result to a file. Choose "Image -> Separate -> 
Export..." from the menu of "Separated Image" window. Input a path and 
click "Save" button to complete. Here, you can embed a profile or choose 
a clipping path.
*It is common that profiles are not embedded in images for printing 
company.

----- Color separation using devicelink profile
Turn on "Use devicelink profile" switch in Separate dialog. This 
operation turns Source color space into Devicelink profile. After that, 
choose the RGB->CMYK devicelink profile. For the destination, choose a 
profile which will be attached after the separation (any profile 
selection does not affect the result of separation). If not needed, it 
can remain unselected.

If you execute it non-interactively, assign a devicelink profile for 
the 4th parameter (input-profile). For 5th parameter (output-profile), 
set an empty string or assign a profile attached after the separation 
(if an empty string, profiles are not attached).


----- Explanation of Dialogs
* Separate dialog
  - Source color space
    Select an ICC profile that represents the color space of the source 
    image. It is required for making the computer know what color the 
    source image is. Turn on the check box if a profile is embedded.

  - Destination color space
    Choose an ICC profile that represents the color space of printed 
    matter. A different profile is provided for different printing 
    condition, so choose the most appropriate one. (The printing 
    condition will be described in the document attached to the profile 
    or web pages of the distributor.)
    If you are not sure, contact your printing company or profile 
    provider.

  - Rendering intent
    See guidebooks about color management. Generally, select either 
    "Perceptual" or "Relative colorimetric" (the final decision should 
    be done after the result).
    "Absolute colorimetric (2)" makes the results closer to results of 
    "Absolute colorimetric" at Photoshop CS2 or later. If you perform a 
    regular transformation followed by an ICC standard, do not choose 
    this option.

  - Use BPC algorithm
    Refer to guidebooks about color management. Unless you have any 
    reason, leave this option on at any time.

  - Use devicelink profile
    Select when you perform color separation with a devicelink profile. 
    Novices should not select it (leave this option off at any time).

  - Preserve pure black
    It replaces pixels of RGB=0,0,0 with CMYK=0%,0%,0%,100%.

  - Overprint pure black
    For the pixels of RGB=0,0,0, it replaces K values with 100%.(CMY 
    values are almost the same as regular converting results.)

  - Make CMYK pseudo-composite
    Usually, separating results are output in the form of grayscale 
    layer, but selecting this option makes it possible to output colored 
    layer.
    Use this option when it is convenient for you to check images by 
    layering 4 images such as when modification or minute adjustment is 
    needed after the separation (The advantage of this option is not more 
    than making it possible to check images by layering images).

* Proof dialog
  - Monitor color space
    Choose the ICC profile of your monitor.
    If the monitor profile is unknown or lacking, color correction 
    cannot return meaningful result.

  - Separated image's color space
    Select a profile assigned at "Destination color space" when the 
    image was separated.

  - Mode
    Refer to guidebooks explained about Color settings in Adobe 
    Photoshop. If you check images only on a monitor, leave "Normal". 
    When it is compared with the printed version in appropriate viewing 
    condition, the choice of "Simulate media white" may be good.

* Export dialog
  - Format
    Choose TIFF, JPEG or Photoshop PSD. If you choose Auto-select mode, 
    the file format is determined based on the extension and then the file 
    is exported (in case the extension is unknown, TIFF format is chosen).

  - Compress pixel data
    When this option is turned on, LZW compression is performed for TIFF 
    images, and PackBits compression is performed for Photoshop PSD 
    images.
    In case of JPEG images, when this option is turned on, 
    compressibility is preceded and this option is turned off, image 
    quality is preceded (Turning off this option do not enable Lossless 
    mode).

 - Clipping path
    Choose a path you use as a clipping path. Enabling the clipping path 
    masks outside a path and displays and prints objects on the back.
    In several applications (such as Scribus), you can specify a clipping 
    path again after placing an image on the page.

 - Embed color profile
    Choose an ICC profile embedded in the file. If unnecessary to embed, 
    choose "None".
    Default CMYK profile and Print simulation profile embed a profile 
    which preferences have specified. Profile used for the separation 
    embeds the profile you used for the color separation.

----- Moving together with Preferences
"separate" plug-in acquires the default value of a dialog from 
Preferences. Following is the correspondence between plug-in items and 
preference items.

Source color space
  ->RGB profile

Destination color space
  ->CMYK profile

Rendering intent
  -> Softproof rendering intent

Monitor color space
  ->Monitor profile

Separated image's color space
  ->Print simulation profile

Proofing mode
  ->Display rendering intent
    ("Absolute colorimetric" corresponds to "Simulate media white")

NOTE : If any profiles are not assigned in Preferences, the profile that 
is described in platform.h is used as default as before.

If you execute it non-interactively, assigning Profile Path for empty 
string and both Rendering intent and Proofing mode for -1 to obtain the 
values of Preferences.


----- Sample Scripts
We provide QProof and QExport, which dispense with proofing and file 
exporting. 
They automates the processing of merging layers -> separation -> 
softproofing (exporting). It uses copying and pasting of the visible 
part, so the original layers are preserved.

These scripts acquire the assignments for Destination color space or 
Rendering intent from Preferences.
In addition, Source color space refers to the embedded profile in the 
original image. For items that are not included in Preferences, assign 
it on Script dialog.

"Real black overprinting..." option performs overprinting processing 
using active layers. Reasonably, in this time, the colors of this layer 
are ignored.

Copy qproof.scm and qexport.scm into the script folder.
(Preferences dialog will inform you the location.)


----- TIFF Import plug-in
Installing separate_import(.exe) makes it possible to read CMYK TIFF 
files under similar conditions to separating with the separate plug-in.

Choose Import -> From CMYK TIFF from the menu in the toolbox, and then 
File Choice dialog opens (in case of GIMP 2.6 or later, from File -> 
Create -> From CMYK TIFF).


----- Tips for building plug-ins
Makefile is provided for Windows, Mac OS X and some other OS such as 
Linux. You can use it for building. In addition, following information 
will be of some help.

* When you build with Windows, the use of MinGW/MSYS environment is 
  recommended.

* When you build with Mac OS X, add "-DMACOSX" to the compilation option 
  of gcc.

* platform.h describes the default values of the profile path, so change 
  it as necessary. In addition, iccbutton.c contains a search path of 
  Profile Choice dialog, which should be fundamentally no need to be 
  corrected.

* When you build for GIMP2.2, delete "-DENABLE_COLOR_MANAGEMENT" in 
  Makefile or empty macro CM such as "make CM=".
  In this case, some functions will be invalidated.

  Note: the support of GIMP2.2 has been stopped after the version 0.5.3. 
  Therefore, the version 0.5.4 or later version may not build for GIMP 
  2.2.

* To disable the dialog sharing between Separate(normal) and Separate(to 
  Color), delete "-DSEPARATE_SEPARETE" in Makefile. This will also 
  disable "plug-in-separate-separate" procedure.

* If you build on the environment in which multiple versions of GIMP are 
  installed, beware of the location of .pc files that pkg-config command 
  refers. If necessary, configure PKG_CONFIG_PATH environmental variable 
  properly.


----- Authors
The Separate+ team
  Yoshinori Yamakawa <yamma-ma at users.sourceforge.jp>
  muscovite

  http://cue.yellowmagic.info/softwares/separate-plus/index.html

Localization
  Alexandre Prokoudine
  Cédric Gémy
  Dust
  Raymond Ostertag
  Zbigniew Małach
  Zdeněk Hataš

Authors of original Separate plug-in
  Alastair M. Robinson
  Sven Neumann
  Michael Schumacher
  Mat Caughron


----- License
The plug-ins and scripts included in this package are licensed under the 
GNU General Public License version 2.

For more information, see COPYING.
